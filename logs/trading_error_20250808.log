2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 0): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (0, 0, datetime.datetime(2025, 8, 8, 8, 51, 35, 171790), None, None, 60.0, None, 50, 40.0, 50.75, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005930", "indicators": {"ma5": 24682.2, "ma20": 27304.5, "ma_signal": "HOLD", "rsi": 25.27307774684087, "rsi_signal": "OVERSOLD", "macd": ... (553 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 90.0, "analysis_time": "2025-08-08T08:51:15.170519"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 50.75, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 55, "trend": "neutral", "strength": 0.3, ... (995 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.178519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 1): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (1, 1, datetime.datetime(2025, 8, 8, 8, 51, 35, 165791), None, None, 60.0, None, 50, 65.0, 53.375, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000660", "indicators": {"ma5": 21437.0, "ma20": 21929.05, "ma_signal": "HOLD", "rsi": 44.62501504755026, "rsi_signal": "NEUTRAL", "macd": ... (555 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.445520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 53.375, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 55, "trend": "neutral", "strength": 0.3 ... (1003 characters truncated) ... al", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.456519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 2): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (2, 2, datetime.datetime(2025, 8, 8, 8, 51, 35, 170790), None, None, 60.0, None, 50, 40.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035420", "indicators": {"ma5": 16401.0, "ma20": 17589.1, "ma_signal": "HOLD", "rsi": 37.809462086843816, "rsi_signal": "NEUTRAL", "macd": ... (556 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 100.0, "analysis_time": "2025-08-08T08:51:15.357521"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1047 characters truncated) ... y_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.369520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 3): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (3, 3, datetime.datetime(2025, 8, 8, 8, 51, 35, 168790), None, None, 60.0, None, 50, 40.0, 44.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005380", "indicators": {"ma5": 53905.8, "ma20": 52539.5, "ma_signal": "HOLD", "rsi": 49.402776283223936, "rsi_signal": "NEUTRAL", "macd": ... (554 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 100.0, "analysis_time": "2025-08-08T08:51:15.826522"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 44.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.841522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 4): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (4, 4, datetime.datetime(2025, 8, 8, 8, 51, 35, 169790), None, None, 60.0, None, 50, 35.0, 44.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "051910", "indicators": {"ma5": 30091.8, "ma20": 28764.3, "ma_signal": "HOLD", "rsi": 60.866318147871546, "rsi_signal": "NEUTRAL", "macd": ... (552 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 100.0, "analysis_time": "2025-08-08T08:51:15.241521"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 44.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.253523"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 5): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (5, 5, datetime.datetime(2025, 8, 8, 8, 51, 35, 166794), None, None, 60.0, None, 50, 45.0, 47.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "028260", "indicators": {"ma5": 17698.0, "ma20": 17152.95, "ma_signal": "HOLD", "rsi": 53.42485975789784, "rsi_signal": "NEUTRAL", "macd": ... (550 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 100.0, "analysis_time": "2025-08-08T08:51:15.190518"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 47.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (995 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.197519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 6): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (6, 6, datetime.datetime(2025, 8, 8, 8, 51, 35, 173791), None, None, 60.0, None, 50, 70.0, 41.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "006400", "indicators": {"ma5": 15723.8, "ma20": 15335.35, "ma_signal": "BUY", "rsi": 63.325833503784004, "rsi_signal": "NEUTRAL", "macd": ... (552 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 70.0, "confidence": 90.0, "analysis_time": "2025-08-08T08:51:15.300520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 41.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.329520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 7): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (7, 7, datetime.datetime(2025, 8, 8, 8, 51, 16, 8521), None, None, 60.0, None, 50, 45.0, 44.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000270", "indicators": {"ma5": 36659.0, "ma20": 33706.25, "ma_signal": "BUY", "rsi": 77.93439716312056, "rsi_signal": "OVERBOUGHT", "macd ... (554 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.214520"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 44.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.215520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 8): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (8, 8, datetime.datetime(2025, 8, 8, 8, 51, 35, 173791), None, None, 60.0, None, 50, 30.0, 41.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "068270", "indicators": {"ma5": 42684.8, "ma20": 39166.05, "ma_signal": "HOLD", "rsi": 74.81925071204265, "rsi_signal": "OVERBOUGHT", "mac ... (552 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 90.0, "analysis_time": "2025-08-08T08:51:15.708522"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 41.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.735521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 9): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (9, 9, datetime.datetime(2025, 8, 8, 8, 51, 35, 170790), None, None, 60.0, None, 50, 80.0, 47.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "105560", "indicators": {"ma5": 16705.8, "ma20": 16117.85, "ma_signal": "BUY", "rsi": 60.12216404886562, "rsi_signal": "NEUTRAL", "macd":  ... (552 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T08:51:15.561520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 47.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (995 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.572519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 10): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (10, 10, datetime.datetime(2025, 8, 8, 8, 51, 35, 169790), None, None, 60.0, None, 50, 45.0, 47.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "055550", "indicators": {"ma5": 42769.6, "ma20": 39525.95, "ma_signal": "BUY", "rsi": 73.380465688158, "rsi_signal": "OVERBOUGHT", "macd": ... (551 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.409520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 47.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (995 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.425518"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 11): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (11, 11, datetime.datetime(2025, 8, 8, 8, 51, 35, 167794), None, None, 60.0, None, 50, 55.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035720", "indicators": {"ma5": 43361.2, "ma20": 43561.3, "ma_signal": "HOLD", "rsi": 53.616790056374384, "rsi_signal": "NEUTRAL", "macd": ... (549 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 55.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.610519"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1009 characters truncated) ... al", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.626521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 12): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (12, 12, datetime.datetime(2025, 8, 8, 8, 51, 35, 171790), None, None, 60.0, None, 50, 45.0, 44.75, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "207940", "indicators": {"ma5": 12211.6, "ma20": 10771.55, "ma_signal": "BUY", "rsi": 74.18190024825095, "rsi_signal": "OVERBOUGHT", "macd ... (551 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.901521"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 44.75, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 55, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.934521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 13): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (13, 13, datetime.datetime(2025, 8, 8, 8, 51, 35, 165791), None, None, 60.0, None, 50, 25.0, 41.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "066570", "indicators": {"ma5": 28726.8, "ma20": 31134.7, "ma_signal": "SELL", "rsi": 24.935411284273684, "rsi_signal": "OVERSOLD", "macd" ... (553 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 25.0, "confidence": 95.0, "analysis_time": "2025-08-08T08:51:15.481520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 41.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.496519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 14): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (14, 14, datetime.datetime(2025, 8, 8, 8, 51, 16, 15520), None, None, 60.0, None, 50, 55.0, 41.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "323410", "indicators": {"ma5": 27327.2, "ma20": 27636.95, "ma_signal": "HOLD", "rsi": 43.79763107152695, "rsi_signal": "NEUTRAL", "macd": ... (551 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 55.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.388521"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 41.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.390520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 15): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (15, 15, datetime.datetime(2025, 8, 8, 8, 51, 35, 172790), None, None, 60.0, None, 50, 20.0, 47.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000810", "indicators": {"ma5": 36759.8, "ma20": 37098.2, "ma_signal": "SELL", "rsi": 42.22304878804786, "rsi_signal": "NEUTRAL", "macd":  ... (550 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T08:51:15.657520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 47.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (995 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.687521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 16): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (16, 16, datetime.datetime(2025, 8, 8, 8, 51, 35, 172790), None, None, 60.0, None, 50, 30.0, 47.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "017670", "indicators": {"ma5": 30282.2, "ma20": 30325.25, "ma_signal": "SELL", "rsi": 40.65158080564917, "rsi_signal": "NEUTRAL", "macd": ... (566 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 100.0, "analysis_time": "2025-08-08T08:51:15.521521"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 47.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (995 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.537520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 17): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (17, 17, datetime.datetime(2025, 8, 8, 8, 51, 35, 164794), None, None, 60.0, None, 50, 70.0, 44.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "034730", "indicators": {"ma5": 28664.0, "ma20": 27511.5, "ma_signal": "BUY", "rsi": 67.29647476540705, "rsi_signal": "NEUTRAL", "macd": 3 ... (548 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 70.0, "confidence": 90.0, "analysis_time": "2025-08-08T08:51:15.272520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 44.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.280520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 18): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (18, 18, datetime.datetime(2025, 8, 8, 8, 51, 35, 174789), None, None, 60.0, None, 50, 80.0, 44.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "259960", "indicators": {"ma5": 18989.8, "ma20": 18452.35, "ma_signal": "BUY", "rsi": 49.191034585126914, "rsi_signal": "NEUTRAL", "macd": ... (551 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T08:51:15.779520"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 44.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.807522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:51:35 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 19): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (19, 19, datetime.datetime(2025, 8, 8, 8, 51, 16, 11520), None, None, 60.0, None, 50, 65.0, 44.25, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "003550", "indicators": {"ma5": 12303.8, "ma20": 12224.0, "ma_signal": "HOLD", "rsi": 46.02012808783166, "rsi_signal": "NEUTRAL", "macd":  ... (561 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T08:51:15.228519"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 44.25, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3, ... (996 characters truncated) ... low", "intensity_score": 30, "volume_ratio": 0.0, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T08:51:15.229519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 08:58:03 | KISCollector | ERROR    | initialize      | ❌ KIS collector 초기화 실패: Token request failed with status 403: {"error_description":"접근토큰 발급 잠시 후 다시 시도하세요(1분당 1회)","error_code":"EGW00133"}
2025-08-08 09:00:10 | TradingExecutor | ERROR    | _validate_buy_order | ❌ 매수 주문 검증 실패: 'StockData' object has no attribute 'get'
2025-08-08 09:00:10 | TradingExecutor | ERROR    | execute_buy_order | ❌ 매수 주문 검증 실패: 검증 중 오류: 'StockData' object has no attribute 'get'
2025-08-08 22:21:40 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 0): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (0, 0, datetime.datetime(2025, 8, 8, 22, 21, 22, 837043), None, None, 60.0, None, 50, 30.0, 59.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005930", "indicators": {"ma5": 61580.0, "ma20": 63590.0, "ma_signal": "SELL", "rsi": 24.475524475524466, "rsi_signal": "OVERSOLD", "macd" ... (562 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:21:11.044012"}', '{"overall_score": 50, "signal_strength": 25.0, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 2, "positive_ratio": 0.5, "negative_rati ... (159 characters truncated) ... \uc815\\ubcf4 \\ubd80\\uc871", "medium_term_outlook": "\\ubd84\\uc11d \\uc815\\ubcf4 \\ubd80\\uc871", "summary": "CLI \\ubd84\\uc11d \\uc644\\ub8cc"}', '{"overall_score": 59.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 65, "trend": "buying", "strength": 0.3, ... (1062 characters truncated) ... tensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:11.051013"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 1): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (1, 1, datetime.datetime(2025, 8, 8, 22, 21, 31, 49680), None, None, 60.0, None, 50, 55.0, 56.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000660", "indicators": {"ma5": 281100.0, "ma20": 280475.0, "ma_signal": "BUY", "rsi": 62.92134831460674, "rsi_signal": "NEUTRAL", "macd": ... (556 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 55.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:21:11.067011"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 56.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 65, "trend": "buying", "strength": 0.3, ... (1026 characters truncated) ... ", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "active_trading", "sustainability": false}, "analysis_time": "2025-08-08T22:21:11.073012"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 2): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (2, 2, datetime.datetime(2025, 8, 8, 22, 21, 11, 89011), None, None, 60.0, None, 50, 80.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035420", "indicators": {"ma5": 255700.0, "ma20": 248050.0, "ma_signal": "BUY", "rsi": 69.1588785046729, "rsi_signal": "NEUTRAL", "macd":  ... (552 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:21:11.087012"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1062 characters truncated) ... score": 50, "volume_ratio": 1.2499999999999998, "pattern": "active_trading", "sustainability": false}, "analysis_time": "2025-08-08T22:21:11.088011"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 3): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (3, 3, datetime.datetime(2025, 8, 8, 22, 21, 40, 988489), None, None, 60.0, None, 50, 45.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005380", "indicators": {"ma5": 36771.8, "ma20": 38880.45, "ma_signal": "HOLD", "rsi": 41.44537578361625, "rsi_signal": "NEUTRAL", "macd": ... (552 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:21:21.272044"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1005 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.289043"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 4): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (4, 4, datetime.datetime(2025, 8, 8, 22, 21, 21, 505043), None, None, 60.0, None, 50, 35.0, 50.625, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "051910", "indicators": {"ma5": 9244.2, "ma20": 10468.25, "ma_signal": "SELL", "rsi": 21.55883630047765, "rsi_signal": "OVERSOLD", "macd": ... (553 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:21:21.025044"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 50.625, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1017 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.027043"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 5): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (5, 5, datetime.datetime(2025, 8, 8, 22, 21, 40, 988489), None, None, 60.0, None, 50, 65.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "028260", "indicators": {"ma5": 14183.6, "ma20": 13781.05, "ma_signal": "HOLD", "rsi": 58.27133479212254, "rsi_signal": "NEUTRAL", "macd": ... (553 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:21:21.038044"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1043 characters truncated) ... tensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.044046"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 6): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (6, 6, datetime.datetime(2025, 8, 8, 22, 21, 40, 993490), None, None, 60.0, None, 50, 65.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "006400", "indicators": {"ma5": 37041.6, "ma20": 37102.05, "ma_signal": "HOLD", "rsi": 52.07737468011441, "rsi_signal": "NEUTRAL", "macd": ... (563 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:21:21.138043"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1006 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.148044"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 7): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (7, 7, datetime.datetime(2025, 8, 8, 22, 21, 40, 992490), None, None, 60.0, None, 50, 65.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000270", "indicators": {"ma5": 38383.6, "ma20": 38496.2, "ma_signal": "HOLD", "rsi": 54.297527931732205, "rsi_signal": "NEUTRAL", "macd": ... (551 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:21:21.004041"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1043 characters truncated) ... tensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.010046"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 8): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (8, 8, datetime.datetime(2025, 8, 8, 22, 21, 40, 987491), None, None, 60.0, None, 50, 80.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "068270", "indicators": {"ma5": 51412.2, "ma20": 50314.3, "ma_signal": "BUY", "rsi": 66.0187799592882, "rsi_signal": "NEUTRAL", "macd": 72 ... (543 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:21:21.191044"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1005 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.201043"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 9): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (9, 9, datetime.datetime(2025, 8, 8, 22, 21, 40, 991489), None, None, 60.0, None, 50, 25.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "105560", "indicators": {"ma5": 14042.6, "ma20": 14473.5, "ma_signal": "SELL", "rsi": 35.22816166883963, "rsi_signal": "NEUTRAL", "macd":  ... (553 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 25.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:21:21.219044"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1015 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.229044"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 10): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (10, 10, datetime.datetime(2025, 8, 8, 22, 21, 21, 507046), None, None, 60.0, None, 50, 35.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "055550", "indicators": {"ma5": 11814.2, "ma20": 12234.3, "ma_signal": "SELL", "rsi": 29.731882134324394, "rsi_signal": "OVERSOLD", "macd" ... (564 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:21:21.097042"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1019 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.097042"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 11): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (11, 11, datetime.datetime(2025, 8, 8, 22, 21, 21, 507046), None, None, 60.0, None, 50, 20.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035720", "indicators": {"ma5": 12917.6, "ma20": 13270.85, "ma_signal": "SELL", "rsi": 43.07659022068369, "rsi_signal": "NEUTRAL", "macd": ... (553 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:21:21.248045"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1022 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.250044"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 12): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (12, 12, datetime.datetime(2025, 8, 8, 22, 21, 40, 989490), None, None, 60.0, None, 50, 35.0, 50.375, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "207940", "indicators": {"ma5": 16607.0, "ma20": 17978.2, "ma_signal": "SELL", "rsi": 23.38927180101888, "rsi_signal": "OVERSOLD", "macd": ... (552 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:21:21.458046"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 50.375, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 55, "trend": "neutral", "strength": 0.3 ... (1014 characters truncated) ... al", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.489045"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 13): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (13, 13, datetime.datetime(2025, 8, 8, 22, 21, 40, 991489), None, None, 60.0, None, 50, 80.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "066570", "indicators": {"ma5": 14068.4, "ma20": 13996.45, "ma_signal": "BUY", "rsi": 52.582596556537915, "rsi_signal": "NEUTRAL", "macd": ... (559 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:21:21.310045"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1031 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.330044"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 14): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (14, 14, datetime.datetime(2025, 8, 8, 22, 21, 40, 989490), None, None, 60.0, None, 50, 35.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "323410", "indicators": {"ma5": 32155.4, "ma20": 33174.85, "ma_signal": "HOLD", "rsi": 50.542888165038, "rsi_signal": "NEUTRAL", "macd": - ... (551 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:21:21.058043"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1060 characters truncated) ... tensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.065043"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 15): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (15, 15, datetime.datetime(2025, 8, 8, 22, 21, 21, 507046), None, None, 60.0, None, 50, 35.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000810", "indicators": {"ma5": 15459.8, "ma20": 16417.9, "ma_signal": "SELL", "rsi": 27.540563620836892, "rsi_signal": "OVERSOLD", "macd" ... (550 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:21:21.166044"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1002 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.170043"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 16): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (16, 16, datetime.datetime(2025, 8, 8, 22, 21, 21, 508044), None, None, 60.0, None, 50, 65.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "017670", "indicators": {"ma5": 44731.2, "ma20": 45377.35, "ma_signal": "HOLD", "rsi": 51.79106714628298, "rsi_signal": "NEUTRAL", "macd": ... (552 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:21:21.422045"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1018 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.424045"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 17): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (17, 17, datetime.datetime(2025, 8, 8, 22, 21, 40, 992490), None, None, 60.0, None, 50, 80.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "034730", "indicators": {"ma5": 12798.8, "ma20": 11880.5, "ma_signal": "BUY", "rsi": 68.18814361258002, "rsi_signal": "NEUTRAL", "macd": 4 ... (548 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:21:21.114043"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1054 characters truncated) ... y_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.121042"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 18): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (18, 18, datetime.datetime(2025, 8, 8, 22, 21, 40, 990492), None, None, 60.0, None, 50, 40.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "259960", "indicators": {"ma5": 23262.8, "ma20": 23429.15, "ma_signal": "HOLD", "rsi": 54.02165913153191, "rsi_signal": "NEUTRAL", "macd": ... (555 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:21:21.378043"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1004 characters truncated) ...  "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.401044"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:21:41 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 19): (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: json 자료형에 대한 잘못된 입력 구문
DETAIL:  잘못된 토큰: "NaN"
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (19, 19, datetime.datetime(2025, 8, 8, 22, 21, 21, 506044), None, None, 60.0, None, 50, 30.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "003550", "indicators": {"ma5": 8209.0, "ma20": 9270.6, "ma_signal": "SELL", "rsi": 21.113952827507816, "rsi_signal": "OVERSOLD", "macd":  ... (554 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:21:21.079048"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1029 characters truncated) ... al", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": false}, "analysis_time": "2025-08-08T22:21:21.081043"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 0): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (0, 0, 2025-08-08 22:26:58.468761, null, null, 60.00, null, 50.00, 30.00, 59.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "005930", "indicators": {"ma5": 61580.0, "ma20": 6359..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 59.875, "foreign_trading": {"net_buying": 0, "..., null, f, 3, 2025-08-08 22:27:08.416765, 2025-08-08 22:27:08.416765)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (0, 0, datetime.datetime(2025, 8, 8, 22, 26, 58, 468761), None, None, 60.0, None, 50, 30.0, 59.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005930", "indicators": {"ma5": 61580.0, "ma20": 63590.0, "ma_signal": "SELL", "rsi": 24.475524475524466, "rsi_signal": "OVERSOLD", "macd" ... (565 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:26:38.472680"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 59.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 65, "trend": "buying", "strength": 0.3, ... (1046 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:38.480680"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 1): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (1, 1, 2025-08-08 22:26:38.51668, null, null, 60.00, null, 50.00, 55.00, 56.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "000660", "indicators": {"ma5": 281100.0, "ma20": 280..., null, {"overall_score": 50, "signal_strength": 50, "confidence": 0.5, ..., {"overall_score": 56.875, "foreign_trading": {"net_buying": 0, "..., null, f, 4, 2025-08-08 22:27:08.421991, 2025-08-08 22:27:08.421991)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (1, 1, datetime.datetime(2025, 8, 8, 22, 26, 38, 516680), None, None, 60.0, None, 50, 55.0, 56.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000660", "indicators": {"ma5": 281100.0, "ma20": 280475.0, "ma_signal": "BUY", "rsi": 62.92134831460674, "rsi_signal": "NEUTRAL", "macd": ... (559 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 55.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:26:38.512681"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 56.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 65, "trend": "buying", "strength": 0.3, ... (1010 characters truncated) ... rmal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "active_trading", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:38.513681"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 2): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_technical_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (2, 2, 2025-08-08 22:26:38.515681, null, null, 60.00, null, 50.00, 80.00, 49.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "035420", "indicators": {"ma5": 255700.0, "ma20": 248..., null, {"overall_score": 50, "signal_strength": 50, "confidence": 0.5, ..., {"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "..., null, f, 5, 2025-08-08 22:27:08.425816, 2025-08-08 22:27:08.425816)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (2, 2, datetime.datetime(2025, 8, 8, 22, 26, 38, 515681), None, None, 60.0, None, 50, 80.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035420", "indicators": {"ma5": 255700.0, "ma20": 248050.0, "ma_signal": "BUY", "rsi": 69.1588785046729, "rsi_signal": "NEUTRAL", "macd":  ... (555 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:26:38.497681"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1046 characters truncated) ... ity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "active_trading", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:38.498680"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 3): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(3) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (3, 3, datetime.datetime(2025, 8, 8, 22, 26, 56, 851923), None, None, 60.0, None, 50, 20.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005380", "indicators": {"ma5": 210400.0, "ma20": 211225.0, "ma_signal": "SELL", "rsi": 42.04545454545455, "rsi_signal": "NEUTRAL", "macd" ... (560 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:26:38.449680"}', '{"overall_score": 50, "signal_strength": 25.0, "confidence": 0.5, "news_sentiment": "positive", "news_count": 4, "positive_ratio": 0.5, "negative_rat ... (706 characters truncated) ... \\uc73c\\ub85c \\uc791\\uc6a9\\ud560 \\uc218 \\uc788\\uc5b4 \\uc9c0\\uc18d\\uc801\\uc778 \\uad00\\ucc30\\uc774 \\ud544\\uc694\\ud569\\ub2c8\\ub2e4."}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (989 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:38.457680"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 4): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (4, 4, 2025-08-08 22:27:08.408685, null, null, 60.00, null, 50.00, 45.00, 50.63, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "051910", "indicators": {"ma5": 23056.8, "ma20": 2157..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 50.625, "foreign_trading": {"net_buying": 0, "..., null, f, 7, 2025-08-08 22:27:08.438301, 2025-08-08 22:27:08.438301)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (4, 4, datetime.datetime(2025, 8, 8, 22, 27, 8, 408685), None, None, 60.0, None, 50, 45.0, 50.625, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "051910", "indicators": {"ma5": 23056.8, "ma20": 21579.95, "ma_signal": "BUY", "rsi": 79.85002418964683, "rsi_signal": "OVERBOUGHT", "macd ... (555 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.434522"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 50.625, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1001 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.440522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 5): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (5, 5, 2025-08-08 22:26:48.786521, null, null, 60.00, null, 50.00, 65.00, 52.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "028260", "indicators": {"ma5": 56610.6, "ma20": 5297..., null, {"overall_score": 50, "signal_strength": 50, "confidence": 0.5, ..., {"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "..., null, f, 8, 2025-08-08 22:27:08.442701, 2025-08-08 22:27:08.442701)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (5, 5, datetime.datetime(2025, 8, 8, 22, 26, 48, 786521), None, None, 60.0, None, 50, 65.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "028260", "indicators": {"ma5": 56610.6, "ma20": 52970.75, "ma_signal": "HOLD", "rsi": 66.85638169048195, "rsi_signal": "NEUTRAL", "macd": ... (554 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.401779"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1027 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.402780"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 6): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_technical_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (6, 6, 2025-08-08 22:27:08.407687, null, null, 60.00, null, 50.00, 55.00, 46.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "006400", "indicators": {"ma5": 25267.2, "ma20": 2198..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "..., null, f, 9, 2025-08-08 22:27:08.446036, 2025-08-08 22:27:08.446036)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (6, 6, datetime.datetime(2025, 8, 8, 22, 27, 8, 407687), None, None, 60.0, None, 50, 55.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "006400", "indicators": {"ma5": 25267.2, "ma20": 21983.0, "ma_signal": "BUY", "rsi": 81.79439252336448, "rsi_signal": "OVERBOUGHT", "macd" ... (564 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 55.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.501523"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (990 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.510522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 7): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(7) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (7, 7, datetime.datetime(2025, 8, 8, 22, 27, 8, 407687), None, None, 60.0, None, 50, 25.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000270", "indicators": {"ma5": 19578.4, "ma20": 20351.4, "ma_signal": "SELL", "rsi": 32.06032119075597, "rsi_signal": "NEUTRAL", "macd":  ... (557 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 25.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:26:48.414523"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1027 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.422520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 8): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_technical_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (8, 8, 2025-08-08 22:27:08.412686, null, null, 60.00, null, 50.00, 65.00, 46.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "068270", "indicators": {"ma5": 13621.4, "ma20": 1313..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "..., null, f, 11, 2025-08-08 22:27:08.453378, 2025-08-08 22:27:08.453378)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (8, 8, datetime.datetime(2025, 8, 8, 22, 27, 8, 412686), None, None, 60.0, None, 50, 65.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "068270", "indicators": {"ma5": 13621.4, "ma20": 13130.3, "ma_signal": "HOLD", "rsi": 60.099750623441395, "rsi_signal": "NEUTRAL", "macd": ... (549 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.570525"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (989 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.578521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 9): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (9, 9, 2025-08-08 22:27:08.406686, null, null, 60.00, null, 50.00, 25.00, 52.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "105560", "indicators": {"ma5": 26146.8, "ma20": 2716..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "..., null, f, 12, 2025-08-08 22:27:08.457851, 2025-08-08 22:27:08.457851)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (9, 9, datetime.datetime(2025, 8, 8, 22, 27, 8, 406686), None, None, 60.0, None, 50, 25.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "105560", "indicators": {"ma5": 26146.8, "ma20": 27168.85, "ma_signal": "SELL", "rsi": 46.17576760433903, "rsi_signal": "NEUTRAL", "macd": ... (558 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 25.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:26:48.758523"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (999 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.781522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 10): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (10, 10, 2025-08-08 22:26:48.787521, null, null, 60.00, null, 50.00, 65.00, 52.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "055550", "indicators": {"ma5": 39458.2, "ma20": 3859..., null, {"overall_score": 50, "signal_strength": 50, "confidence": 0.5, ..., {"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "..., null, f, 13, 2025-08-08 22:27:08.461384, 2025-08-08 22:27:08.461384)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (10, 10, datetime.datetime(2025, 8, 8, 22, 26, 48, 787521), None, None, 60.0, None, 50, 65.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "055550", "indicators": {"ma5": 39458.2, "ma20": 38597.65, "ma_signal": "HOLD", "rsi": 54.5945075299992, "rsi_signal": "NEUTRAL", "macd":  ... (554 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.473524"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1003 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.474524"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 11): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(11) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (11, 11, datetime.datetime(2025, 8, 8, 22, 26, 48, 788521), None, None, 60.0, None, 50, 20.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035720", "indicators": {"ma5": 23869.4, "ma20": 25539.25, "ma_signal": "SELL", "rsi": 35.80214257373363, "rsi_signal": "NEUTRAL", "macd": ... (558 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:26:48.525524"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1006 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.527522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 12): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (12, 12, 2025-08-08 22:27:08.410686, null, null, 60.00, null, 50.00, 35.00, 50.38, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "207940", "indicators": {"ma5": 21087.2, "ma20": 2365..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 50.375, "foreign_trading": {"net_buying": 0, "..., null, f, 15, 2025-08-08 22:27:08.483051, 2025-08-08 22:27:08.483051)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (12, 12, datetime.datetime(2025, 8, 8, 22, 27, 8, 410686), None, None, 60.0, None, 50, 35.0, 50.375, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "207940", "indicators": {"ma5": 21087.2, "ma20": 23651.1, "ma_signal": "SELL", "rsi": 7.763009049773757, "rsi_signal": "OVERSOLD", "macd": ... (566 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 35.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:26:48.687522"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 50.375, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 55, "trend": "neutral", "strength": 0.3 ... (998 characters truncated) ... normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.712522"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 13): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(13) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (13, 13, datetime.datetime(2025, 8, 8, 22, 27, 8, 409685), None, None, 60.0, None, 50, 45.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "066570", "indicators": {"ma5": 32658.6, "ma20": 33438.35, "ma_signal": "HOLD", "rsi": 46.5796082370668, "rsi_signal": "NEUTRAL", "macd":  ... (566 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:26:48.618524"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1015 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.629521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 14): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_technical_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (14, 14, 2025-08-08 22:27:08.405687, null, null, 60.00, null, 50.00, 65.00, 46.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "323410", "indicators": {"ma5": 16281.6, "ma20": 1573..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "..., null, f, 17, 2025-08-08 22:27:08.502753, 2025-08-08 22:27:08.502753)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (14, 14, datetime.datetime(2025, 8, 8, 22, 27, 8, 405687), None, None, 60.0, None, 50, 65.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "323410", "indicators": {"ma5": 16281.6, "ma20": 15732.95, "ma_signal": "HOLD", "rsi": 63.575502107612195, "rsi_signal": "NEUTRAL", "macd" ... (554 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.453522"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1044 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.459523"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 15): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (15, 15, 2025-08-08 22:27:08.411685, null, null, 60.00, null, 50.00, 60.00, 52.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "000810", "indicators": {"ma5": 26933.4, "ma20": 2447..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "..., null, f, 18, 2025-08-08 22:27:08.513761, 2025-08-08 22:27:08.513761)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (15, 15, datetime.datetime(2025, 8, 8, 22, 27, 8, 411685), None, None, 60.0, None, 50, 60.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000810", "indicators": {"ma5": 26933.4, "ma20": 24476.5, "ma_signal": "HOLD", "rsi": 63.19717203456402, "rsi_signal": "NEUTRAL", "macd":  ... (555 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 60.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.543524"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (986 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.552521"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 16): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.CheckViolationError'>: 새 자료가 "analysis_results" 릴레이션의 "check_supply_demand_score_range" 체크 제약 조건을 위반했습니다
DETAIL:  실패한 자료: (16, 16, 2025-08-08 22:27:08.410686, null, null, 60.00, null, 50.00, 65.00, 52.88, null, null, null, null, null, null, 0, 0, null, 0, 0, 0, null, null, null, null, {"symbol": "017670", "indicators": {"ma5": 42733.8, "ma20": 4321..., null, {"overall_score": 50.0, "news_sentiment": "neutral"}, {"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "..., null, f, 19, 2025-08-08 22:27:08.518826, 2025-08-08 22:27:08.518826)
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (16, 16, datetime.datetime(2025, 8, 8, 22, 27, 8, 410686), None, None, 60.0, None, 50, 65.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "017670", "indicators": {"ma5": 42733.8, "ma20": 43219.35, "ma_signal": "HOLD", "rsi": 42.9209644570002, "rsi_signal": "NEUTRAL", "macd":  ... (553 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.652522"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1002 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.663523"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 17): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(17) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (17, 17, datetime.datetime(2025, 8, 8, 22, 26, 48, 788521), None, None, 60.0, None, 50, 40.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "034730", "indicators": {"ma5": 32432.2, "ma20": 32070.8, "ma_signal": "HOLD", "rsi": 44.932493249324935, "rsi_signal": "NEUTRAL", "macd": ... (558 characters truncated) ... ls": 3, "neutral_signals": 4, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:26:48.486519"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1038 characters truncated) ... nsity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "low_activity", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.487519"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 18): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(18) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (18, 18, datetime.datetime(2025, 8, 8, 22, 26, 48, 788521), None, None, 60.0, None, 50, 30.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "259960", "indicators": {"ma5": 30874.4, "ma20": 33571.35, "ma_signal": "SELL", "rsi": 25.77061722945635, "rsi_signal": "OVERSOLD", "macd" ... (561 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:26:48.596521"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (988 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.597523"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:27:08 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 19): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(19) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (19, 19, datetime.datetime(2025, 8, 8, 22, 26, 48, 789521), None, None, 60.0, None, 50, 45.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "003550", "indicators": {"ma5": 49233.4, "ma20": 44610.85, "ma_signal": "BUY", "rsi": 71.70180009474183, "rsi_signal": "OVERBOUGHT", "macd ... (553 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 45.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:26:48.731522"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1013 characters truncated) ... normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": 0}, "analysis_time": "2025-08-08T22:26:48.734520"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 1): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(1) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (1, 1, datetime.datetime(2025, 8, 8, 22, 34, 6, 708389), None, None, 60.0, None, 50, 55.0, 56.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000660", "indicators": {"ma5": 281100.0, "ma20": 280475.0, "ma_signal": "BUY", "rsi": 62.92134831460674, "rsi_signal": "NEUTRAL", "macd": ... (559 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 55.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:06.656399"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 56.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 65, "trend": "buying", "strength": 0.3, ... (1010 characters truncated) ... rmal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "active_trading", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.656399"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 2): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(2) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (2, 2, datetime.datetime(2025, 8, 8, 22, 34, 6, 830388), None, None, 60.0, None, 50, 80.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035420", "indicators": {"ma5": 255700.0, "ma20": 248050.0, "ma_signal": "BUY", "rsi": 69.1588785046729, "rsi_signal": "NEUTRAL", "macd":  ... (555 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 80.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:06.771388"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1046 characters truncated) ... ity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "active_trading", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.773390"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 3): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(3) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (3, 3, datetime.datetime(2025, 8, 8, 22, 34, 26, 721105), None, None, 60.0, None, 50, 20.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "005380", "indicators": {"ma5": 210400.0, "ma20": 211225.0, "ma_signal": "SELL", "rsi": 42.04545454545455, "rsi_signal": "NEUTRAL", "macd" ... (560 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:06.787389"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (989 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.796389"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 4): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(4) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (4, 4, datetime.datetime(2025, 8, 8, 22, 34, 26, 674259), None, None, 60.0, None, 50, 25.0, 50.625, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "051910", "indicators": {"ma5": 240400.0, "ma20": 267600.0, "ma_signal": "SELL", "rsi": 20.95238095238095, "rsi_signal": "OVERSOLD", "macd ... (559 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 25.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:34:06.699388"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 50.625, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1001 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.706389"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 5): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(5) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (5, 5, datetime.datetime(2025, 8, 8, 22, 34, 26, 673260), None, None, 60.0, None, 50, 20.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "028260", "indicators": {"ma5": 162840.0, "ma20": 171085.0, "ma_signal": "SELL", "rsi": 38.309352517985616, "rsi_signal": "NEUTRAL", "macd ... (559 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:06.671399"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1027 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.679399"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 6): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(6) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (6, 6, datetime.datetime(2025, 8, 8, 22, 34, 26, 722093), None, None, 60.0, None, 50, 40.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "006400", "indicators": {"ma5": 179280.0, "ma20": 179925.0, "ma_signal": "SELL", "rsi": 40.31936127744511, "rsi_signal": "NEUTRAL", "macd" ... (559 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:06.743390"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (990 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.752387"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 7): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(7) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (7, 7, datetime.datetime(2025, 8, 8, 22, 34, 26, 812783), None, None, 60.0, None, 50, 20.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000270", "indicators": {"ma5": 98960.0, "ma20": 100390.0, "ma_signal": "SELL", "rsi": 39.416058394160586, "rsi_signal": "NEUTRAL", "macd" ... (558 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:06.815389"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1027 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:06.827390"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 8): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(8) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (8, 8, datetime.datetime(2025, 8, 8, 22, 34, 36, 588923), None, None, 60.0, None, 50, 55.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "068270", "indicators": {"ma5": 13014.8, "ma20": 12354.9, "ma_signal": "BUY", "rsi": 73.64675984752223, "rsi_signal": "OVERBOUGHT", "macd" ... (552 characters truncated) ... als": 3, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 55.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:34:16.885320"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (989 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.898318"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 9): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(9) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (9, 9, datetime.datetime(2025, 8, 8, 22, 34, 36, 585924), None, None, 60.0, None, 50, 30.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "105560", "indicators": {"ma5": 24716.8, "ma20": 26049.05, "ma_signal": "SELL", "rsi": 28.92350913037926, "rsi_signal": "OVERSOLD", "macd" ... (562 characters truncated) ... als": 4, "neutral_signals": 2, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 95.0, "analysis_time": "2025-08-08T22:34:16.815320"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (999 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.832321"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 10): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(10) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (10, 10, datetime.datetime(2025, 8, 8, 22, 34, 36, 585924), None, None, 60.0, None, 50, 20.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "055550", "indicators": {"ma5": 29868.4, "ma20": 31335.5, "ma_signal": "SELL", "rsi": 40.48270893371758, "rsi_signal": "NEUTRAL", "macd":  ... (553 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:16.592329"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1003 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.600318"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 11): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(11) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (11, 11, datetime.datetime(2025, 8, 8, 22, 34, 36, 590923), None, None, 60.0, None, 50, 70.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "035720", "indicators": {"ma5": 43050.4, "ma20": 42780.8, "ma_signal": "BUY", "rsi": 67.01722574796011, "rsi_signal": "NEUTRAL", "macd": 3 ... (551 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 70.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:16.632318"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1006 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.639319"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 12): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(12) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (12, 12, datetime.datetime(2025, 8, 8, 22, 34, 36, 584925), None, None, 60.0, None, 50, 65.0, 50.375, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "207940", "indicators": {"ma5": 31821.4, "ma20": 29924.75, "ma_signal": "HOLD", "rsi": 61.16166022684781, "rsi_signal": "NEUTRAL", "macd": ... (563 characters truncated) ... als": 2, "neutral_signals": 4, "overall_signal": "HOLD"}, "technical_score": 65.0, "confidence": 80.0, "analysis_time": "2025-08-08T22:34:16.653318"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 50.375, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 55, "trend": "neutral", "strength": 0.3 ... (998 characters truncated) ... normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.661318"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 13): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(13) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (13, 13, datetime.datetime(2025, 8, 8, 22, 34, 36, 583922), None, None, 60.0, None, 50, 70.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "066570", "indicators": {"ma5": 13280.6, "ma20": 12983.1, "ma_signal": "BUY", "rsi": 60.73359981189748, "rsi_signal": "NEUTRAL", "macd": 2 ... (551 characters truncated) ... als": 2, "neutral_signals": 3, "overall_signal": "HOLD"}, "technical_score": 70.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:16.704319"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1015 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.714319"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 14): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(14) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (14, 14, datetime.datetime(2025, 8, 8, 22, 34, 36, 588923), None, None, 60.0, None, 50, 20.0, 46.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "323410", "indicators": {"ma5": 14554.2, "ma20": 15506.6, "ma_signal": "SELL", "rsi": 41.02079395085066, "rsi_signal": "NEUTRAL", "macd":  ... (555 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:16.613329"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 46.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1044 characters truncated) ...  "intensity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.619317"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 15): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(15) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (15, 15, datetime.datetime(2025, 8, 8, 22, 34, 16, 907320), None, None, 60.0, None, 50, 25.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "000810", "indicators": {"ma5": 27702.8, "ma20": 29241.6, "ma_signal": "SELL", "rsi": 31.385441748471948, "rsi_signal": "NEUTRAL", "macd": ... (559 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 25.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:16.754319"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (986 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.755319"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 16): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(16) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (16, 16, datetime.datetime(2025, 8, 8, 22, 34, 36, 586923), None, None, 60.0, None, 50, 30.0, 52.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "017670", "indicators": {"ma5": 14555.6, "ma20": 14832.15, "ma_signal": "SELL", "rsi": 46.440182054616386, "rsi_signal": "NEUTRAL", "macd" ... (569 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:16.777320"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 52.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1002 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.791319"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 17): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (stock_id)=(17) 키가 "stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (17, 17, datetime.datetime(2025, 8, 8, 22, 34, 36, 587923), None, None, 60.0, None, 50, 20.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "034730", "indicators": {"ma5": 39653.8, "ma20": 40847.95, "ma_signal": "SELL", "rsi": 34.5029662856316, "rsi_signal": "NEUTRAL", "macd":  ... (556 characters truncated) ... ls": 4, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 20.0, "confidence": 100.0, "analysis_time": "2025-08-08T22:34:16.677320"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1038 characters truncated) ... nsity_score": 50, "volume_ratio": 1.2499999999999998, "pattern": "low_activity", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.687319"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 18): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(18) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (18, 18, datetime.datetime(2025, 8, 8, 22, 34, 16, 904320), None, None, 60.0, None, 50, 30.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "259960", "indicators": {"ma5": 51280.2, "ma20": 47707.05, "ma_signal": "HOLD", "rsi": 71.78893340010015, "rsi_signal": "OVERBOUGHT", "mac ... (554 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 30.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:16.732319"}', '{"overall_score": 50, "signal_strength": 50, "confidence": 0.5, "news_sentiment": "neutral", "news_count": 0, "positive_ratio": 0.5, "negative_ratio" ... (182 characters truncated) ... erm_outlook": "\\uc815\\ubcf4 \\ubd80\\uc871", "summary": "\\ub274\\uc2a4 \\uc815\\ubcf4 \\ubd80\\uc871\\uc73c\\ub85c \\uc911\\ub9bd \\ud310\\uc815"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (988 characters truncated) ... el": "normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "normal", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.734321"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:34:36 | DatabaseOperations | ERROR    | save_analysis_result | ❌ 분석 결과 저장 실패 (FilteredStock ID: 19): (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: "analysis_results" 테이블에서 자료 추가, 갱신 작업이 "analysis_results_filtered_stock_id_fkey" 참조키(foreign key) 제약 조건을 위배했습니다
DETAIL:  (filtered_stock_id)=(19) 키가 "filtered_stocks" 테이블에 없습니다.
[SQL: INSERT INTO analysis_results (filtered_stock_id, stock_id, analysis_datetime, strategy, total_score, score_threshold, final_grade, news_score, technical_score, supply_demand_score, rsi_14, macd_signal, supertrend_signal, ema_5, ema_20, bollinger_position, positive_news_count, negative_news_count, institution_net, foreign_net, individual_net, volatility, liquidity_risk, market_risk, risk_level, technical_details, sentiment_details, supply_demand_details, price_at_analysis, is_selected, created_at, updated_at) VALUES ($1::INTEGER, $2::INTEGER, $3::TIMESTAMP WITHOUT TIME ZONE, $4::VARCHAR, $5::NUMERIC(5, 2), $6::NUMERIC(5, 2), $7::analysisgrade, $8::NUMERIC(5, 2), $9::NUMERIC(5, 2), $10::NUMERIC(5, 2), $11::NUMERIC(5, 2), $12::VARCHAR, $13::VARCHAR, $14::INTEGER, $15::INTEGER, $16::VARCHAR, $17::INTEGER, $18::INTEGER, $19::BIGINT, $20::BIGINT, $21::BIGINT, $22::NUMERIC(5, 2), $23::NUMERIC(5, 2), $24::NUMERIC(5, 2), $25::risklevel, $26::JSON, $27::JSON, $28::JSON, $29::INTEGER, $30::BOOLEAN, now(), now()) RETURNING analysis_results.id, analysis_results.created_at, analysis_results.updated_at]
[parameters: (19, 19, datetime.datetime(2025, 8, 8, 22, 34, 36, 589923), None, None, 60.0, None, 50, 40.0, 49.875, None, None, None, None, None, None, 0, 0, 0, 0, 0, None, None, None, None, '{"symbol": "003550", "indicators": {"ma5": 33246.2, "ma20": 36695.7, "ma_signal": "HOLD", "rsi": 29.236757042021253, "rsi_signal": "OVERSOLD", "macd" ... (558 characters truncated) ... als": 3, "neutral_signals": 3, "overall_signal": "SELL"}, "technical_score": 40.0, "confidence": 90.0, "analysis_time": "2025-08-08T22:34:16.851319"}', '{"overall_score": 50.0, "news_sentiment": "neutral"}', '{"overall_score": 49.875, "foreign_trading": {"net_buying": 0, "trading_value": 0, "buy_ratio": 0.5, "score": 45, "trend": "neutral", "strength": 0.3 ... (1013 characters truncated) ... normal", "intensity_score": 50, "volume_ratio": 1.25, "pattern": "low_activity", "sustainability": 0}, "analysis_time": "2025-08-08T22:34:16.862319"}', None, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-08 22:58:24 | KISCollector | ERROR    | initialize      | ❌ KIS collector 초기화 실패: Token request failed with status 403: {"error_description":"접근토큰 발급 잠시 후 다시 시도하세요(1분당 1회)","error_code":"EGW00133"}
