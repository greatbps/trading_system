# Trading System Development Log

## ğŸ“… 2025-08-05 ê°œë°œ ì™„ë£Œ ì‚¬í•­

### ğŸ¯ Gemini CLI ì „í™˜ í”„ë¡œì íŠ¸ (ì™„ë£Œ)

#### ì£¼ìš” ì„±ê³¼
- **Python SDK â†’ Gemini CLI ì™„ì „ ì „í™˜** âœ…
- **í† í° íš¨ìœ¨ì„± ìµœì í™”** âœ…  
- **Windows/MSYS í™˜ê²½ í˜¸í™˜ì„± í™•ë³´** âœ…

#### ì™„ë£Œëœ ì‘ì—…ë“¤

1. **gemini_analyzer.py ì™„ì „ ì¬ì‘ì„±** âœ…
   - Python SDK (`google-generativeai`) ì œê±°
   - Node.js ê¸°ë°˜ `@google/gemini-cli` ì‚¬ìš©
   - ë¹„ë™ê¸° subprocess í˜¸ì¶œ êµ¬í˜„
   - Windows ê²½ë¡œ í˜¸í™˜ì„± í•´ê²°
   - ìë™ CLI ê²½ë¡œ íƒì§€ ë° fallback ë©”ì»¤ë‹ˆì¦˜

2. **ì˜ì¡´ì„± ê´€ë¦¬** âœ…
   - `requirements.txt`ì—ì„œ `google-generativeai>=0.3.0` ì œê±°
   - CLI ì „ìš© í™˜ê²½ìœ¼ë¡œ ì „í™˜

3. **í”„ë¡œì íŠ¸ êµ¬ì¡° ì •ë¦¬** âœ…
   - `strategies/__init__.py` ëª¨ë“  ì „ëµ í´ë˜ìŠ¤ import êµ¬ì„±
   - í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ìƒì„± (`test_quick.py`, `test_final.py`)

4. **ì´ì „ ì´ìŠˆ í•´ê²° ì™„ë£Œ** âœ…
   - ëª¨ì˜/ëœë¤ ê°€ê²© ë°ì´í„° ì‚¬ìš© ì™„ì „ ì œê±° (ì‚¬ìš©ì ì—„ê²© ê¸ˆì§€ ìš”êµ¬ì‚¬í•­)
   - ì½”ë£¨í‹´ ê°ì²´ ì˜¤ë¥˜ ìˆ˜ì • (async/await íŒ¨í„´ ì ìš©)
   - VWAP ì „ëµ ì¡´ì¬ í™•ì¸ (ì‹¤ì œë¡œ êµ¬í˜„ë˜ì–´ ìˆì—ˆìŒ)
   - ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘ fallback ë©”ì»¤ë‹ˆì¦˜ ê°•í™”

#### ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

**CLI í†µí•© ì•„í‚¤í…ì²˜:**
```python
# ìë™ CLI ê²½ë¡œ íƒì§€
possible_commands = [
    ['gemini', '--version'],
    ['node', 'C:\\Users\\great\\AppData\\Roaming\\npm\\node_modules\\@google\\gemini-cli\\dist\\index.js', '--version'],
    ['/c/Users/great/AppData/Roaming/npm/gemini.cmd', '--version'],
]

# ë¹„ë™ê¸° CLI í˜¸ì¶œ
async def _call_gemini_cli(self, prompt: str, max_retries: int = 3) -> str:
    cmd_args = self.cli_command + ['-p', f'ë‹¤ìŒ ë‚´ìš©ì„ ë¶„ì„í•´ì£¼ì„¸ìš”: {prompt[:200]}...']
    process = await asyncio.create_subprocess_exec(*cmd_args, ...)
```

**í™˜ê²½ ì„¤ì •:**
- CLI ë²„ì „: `@google/gemini-cli@0.1.16`
- API í‚¤: `GEMINI_API_KEY` í™˜ê²½ë³€ìˆ˜
- Node.js ê²½ë¡œ: `C:\Users\great\AppData\Roaming\npm\node_modules\@google\gemini-cli\dist\index.js`

#### ì„±ëŠ¥ ê°œì„  íš¨ê³¼
- **í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”**: SDK ì˜¤ë²„í—¤ë“œ ì œê±°
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë”© ë¶ˆí•„ìš”
- **ì‘ë‹µ ì†ë„ í–¥ìƒ**: ì§ì ‘ CLI í˜¸ì¶œë¡œ ë” ë¹ ë¥¸ ì²˜ë¦¬

---

## ğŸš§ ê°œë°œ ë‚¨ì€ ì‘ì—… ëª©ë¡

### 1. í•µì‹¬ ê¸°ëŠ¥ ì™„ì„± (High Priority)
- [ ] **ì‹¤ì œ KIS API í†µí•© ì™„ë£Œ**
  - ì™¸êµ­ì¸ ë§¤ë§¤ë™í–¥ API ì—°ê²° (`supply_demand_analyzer.py`)
  - ì‹¤ì‹œê°„ í˜¸ê°€ ë°ì´í„° API ì—°ê²°
  - ì¢…ëª©ë³„ ìƒì„¸ ì •ë³´ API ì—°ê²°

- [ ] **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìµœì í™”**
  - ì‹¤ì‹œê°„ ë°ì´í„° ì €ì¥ êµ¬ì¡° ê°œì„ 
  - ë¶„ì„ ê²°ê³¼ ìºì‹± ë©”ì»¤ë‹ˆì¦˜
  - ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤ ì¶”ê°€

- [ ] **ì‹¤ì‹œê°„ íŠ¸ë ˆì´ë”© ì—”ì§„ êµ¬í˜„**
  - ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
  - ìë™ ì£¼ë¬¸ ì‹¤í–‰ ì‹œìŠ¤í…œ
  - ë¦¬ìŠ¤í¬ ê´€ë¦¬ ëª¨ë“ˆ

### 2. ë¶„ì„ ì—”ì§„ ê³ ë„í™” (Medium Priority)
- [ ] **ì°¨íŠ¸ íŒ¨í„´ ë¶„ì„ ê³ ë„í™”**
  - ë” ì •êµí•œ íŒ¨í„´ ì¸ì‹ ì•Œê³ ë¦¬ì¦˜
  - íŒ¨í„´ë³„ ì‹ ë¢°ë„ scoring ì‹œìŠ¤í…œ
  - ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ ë°˜ì˜

- [ ] **ê°ì„± ë¶„ì„ ì •í™•ë„ í–¥ìƒ**
  - í•œêµ­ ì£¼ì‹ ì‹œì¥ íŠ¹í™” í‚¤ì›Œë“œ í•™ìŠµ
  - ë‰´ìŠ¤ ì†ŒìŠ¤ë³„ ê°€ì¤‘ì¹˜ ì ìš©
  - ì‹¤ì‹œê°„ ì†Œì…œ ë¯¸ë””ì–´ ê°ì„± ë¶„ì„ ì¶”ê°€

- [ ] **ê¸°ìˆ ì  ë¶„ì„ ì§€í‘œ í™•ì¥**
  - ì¶”ê°€ ê¸°ìˆ ì  ì§€í‘œ êµ¬í˜„ (Ichimoku, Fibonacci ë“±)
  - ë‹¤ì¤‘ ì‹œê°„ëŒ€ ë¶„ì„ ì§€ì›
  - ì§€í‘œ ì¡°í•© ìµœì í™”

### 3. ì „ëµ ì—”ì§„ í™•ì¥ (Medium Priority)  
- [ ] **ì¶”ê°€ ì „ëµ êµ¬í˜„**
  - Pairs Trading ì „ëµ
  - Mean Reversion ì „ëµ
  - ML ê¸°ë°˜ ì˜ˆì¸¡ ì „ëµ

- [ ] **í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ ì‹œìŠ¤í…œ**
  - ë‹¤ì¢…ëª© ë™ì‹œ ê±°ë˜ ì§€ì›
  - í¬ì§€ì…˜ ì‚¬ì´ì§• ì•Œê³ ë¦¬ì¦˜
  - ë¦¬ë°¸ëŸ°ì‹± ìë™í™”

### 4. ì‹œìŠ¤í…œ ì•ˆì •ì„± & ëª¨ë‹ˆí„°ë§ (High Priority)
- [ ] **ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ê°•í™”**
  - êµ¬ì¡°í™”ëœ ë¡œê¹… ì‹œìŠ¤í…œ
  - ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ìƒíƒœ ëª¨ë‹ˆí„°ë§
  - ì•ŒëŒ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ

- [ ] **ì˜¤ë¥˜ ì²˜ë¦¬ ë° ë³µêµ¬**
  - API ì¥ì•  ì‹œ ìë™ ë³µêµ¬
  - ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ëŒ€ì‘
  - ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦

- [ ] **ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ**
  - ê³¼ê±° ë°ì´í„° ê¸°ë°˜ ì „ëµ ê²€ì¦
  - ì„±ê³¼ ë¶„ì„ ë° ë¦¬í¬íŒ…
  - ì „ëµ íŒŒë¼ë¯¸í„° ìµœì í™”

### 5. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ (Low Priority)
- [ ] **ì›¹ ëŒ€ì‹œë³´ë“œ êµ¬í˜„**
  - ì‹¤ì‹œê°„ í¬íŠ¸í´ë¦¬ì˜¤ í˜„í™©
  - ê±°ë˜ ì´ë ¥ ë° ì„±ê³¼ ë¶„ì„
  - ì „ëµ ì„¤ì • ë° ê´€ë¦¬

- [ ] **ëª¨ë°”ì¼ ì•Œë¦¼ ì‹œìŠ¤í…œ**
  - ì¤‘ìš” ê±°ë˜ ì‹ í˜¸ í‘¸ì‹œ ì•Œë¦¼
  - ì‹œìŠ¤í…œ ìƒíƒœ ì•Œë¦¼
  - ìˆ˜ìµ/ì†ì‹¤ ì•Œë¦¼

### 6. ì„±ëŠ¥ ìµœì í™” (Medium Priority)
- [ ] **ë°ì´í„° ì²˜ë¦¬ ìµœì í™”**
  - ë³‘ë ¬ ì²˜ë¦¬ êµ¬í˜„
  - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
  - ìºì‹± ì „ëµ ê°œì„ 

- [ ] **API í˜¸ì¶œ ìµœì í™”**
  - ìš”ì²­ ìˆ˜ ì œí•œ ëŒ€ì‘
  - ë°°ì¹˜ ì²˜ë¦¬ êµ¬í˜„
  - ì‘ë‹µ ì‹œê°„ ë‹¨ì¶•

---

## ğŸ“‹ ë‹¤ìŒ ê°œë°œ ì„¸ì…˜ ìš°ì„ ìˆœìœ„

### Phase 1: í•µì‹¬ ê¸°ëŠ¥ ì™„ì„± (1-2ì£¼)
1. KIS API í†µí•© ì™„ë£Œ
2. ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ ì‹œìŠ¤í…œ
3. ê¸°ë³¸ ìë™ ê±°ë˜ ê¸°ëŠ¥

### Phase 2: ë¶„ì„ ì—”ì§„ ê³ ë„í™” (2-3ì£¼)  
1. Gemini CLI ê¸°ë°˜ ê°ì„± ë¶„ì„ ì •í™•ë„ í–¥ìƒ
2. ì°¨íŠ¸ íŒ¨í„´ ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ ê°œì„ 
3. ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ êµ¬ì¶•

### Phase 3: ì‹œìŠ¤í…œ ì•ˆì •ì„± (1-2ì£¼)
1. ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
2. ì˜¤ë¥˜ ì²˜ë¦¬ ê°•í™”
3. ì„±ëŠ¥ ìµœì í™”

---

## ğŸ”§ ê¸°ìˆ  ë¶€ì±„ ë° ê°œì„  ì‚¬í•­

### ì¦‰ì‹œ í•´ê²° í•„ìš”
- [ ] `fundamental_analyzer.py`ì˜ í•˜ë“œì½”ë”©ëœ ê°’ë“¤ì„ ì‹¤ì œ API ì—°ë™ìœ¼ë¡œ êµì²´
- [ ] `supply_demand_analyzer.py`ì˜ TODO í•­ëª©ë“¤ ì‹¤ì œ KIS API êµ¬í˜„
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ì¼ê´€ì„± ê°œì„ 

### ì¤‘ì¥ê¸° ê°œì„ 
- [ ] ì½”ë“œ ë¬¸ì„œí™” ê°•í™”
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ëŒ€  
- [ ] ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§ ë° ìµœì í™”
- [ ] ë³´ì•ˆ ê²€í†  ë° ê°•í™”

---

## ğŸ’¡ ê°œë°œ ë…¸íŠ¸

### Gemini CLI ì „í™˜ í•™ìŠµì‚¬í•­
1. **Windows í™˜ê²½ì—ì„œ Node.js ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰**: ê²½ë¡œ êµ¬ë¶„ìì™€ ì‹¤í–‰ ë°©ì‹ ì°¨ì´ ì£¼ì˜
2. **ë¹„ë™ê¸° subprocess ì²˜ë¦¬**: `asyncio.create_subprocess_exec` í™œìš©
3. **ë‹¤ì¤‘ fallback ì „ëµ**: ì—¬ëŸ¬ ì‹¤í–‰ ê²½ë¡œë¥¼ í†µí•œ ì•ˆì •ì„± í™•ë³´

### í–¥í›„ ê³ ë ¤ì‚¬í•­
1. **Gemini CLI ì—…ë°ì´íŠ¸ ëŒ€ì‘**: ë²„ì „ ë³€ê²½ ì‹œ í˜¸í™˜ì„± í™•ì¸ í•„ìš”
2. **API ìš”ì²­ ì œí•œ**: Gemini API ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ì œí•œ ëŒ€ì‘
3. **ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ **: CLI ì‹¤í–‰ ì‹¤íŒ¨ ì‹œ ë” ì„¸ë°€í•œ ëŒ€ì‘ í•„ìš”

---

---

## ğŸ“… 2025-08-08 44ë²ˆ ë©”ë‰´ ì¢…í•© ë¶„ì„ ê¸°ëŠ¥ ì™„ì „ ìˆ˜ì •

### ğŸš¨ ë¬¸ì œ ìƒí™©
ì‚¬ìš©ìê°€ 44ë²ˆ ë©”ë‰´(ì¢…í•© ë¶„ì„)ì„ ì‹¤í–‰í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ì´ ë°œìƒ:

1. **í•˜ë“œì½”ë”© ìœ„ë°˜**: "í•˜ë“œì½”ë”© ê¸ˆì§€ë¬ì§€?" - ì£¼ìš” ì¢…ëª©ì´ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŒ
2. **ë‰´ìŠ¤ ë¶„ì„ ë¯¸ì‘ë™**: "ë‰´ìŠ¤ë„ í•˜ë‚˜ë„ ì²˜ë¦¬ ì•ˆë˜ìë‚˜" - ë‰´ìŠ¤ ë¶„ì„ì´ ì „í˜€ ì‘ë™í•˜ì§€ ì•ŠìŒ  
3. **íŒ¨í„´ ë¶„ì„ ë¯¸ì‘ë™**: "íŒ¨í„´ë„ ê±°ì˜ ì•ˆë˜ê³ " - íŒ¨í„´ ë¶„ì„ì´ ê±°ì˜ ì‘ë™í•˜ì§€ ì•ŠìŒ
4. **ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜**: FilteredStock ID ë§¤í•‘ ì˜¤ë¥˜ë¡œ ë¶„ì„ ì‹¤íŒ¨
5. **analysis_handlers ì˜¤ë¥˜**: 'TradingSystem' object has no attribute 'analysis_handlers'

### ğŸ”§ í•´ê²° ê³¼ì •

#### 1ë‹¨ê³„: 44ë²ˆ ë©”ë‰´ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ í˜¸ì¶œ ì°¨ë‹¨ âœ…
**íŒŒì¼**: `D:/trading_system/core/menu_handlers.py`
- **ë³€ê²½ ì „**: `run_market_analysis()` í˜¸ì¶œ â†’ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì‹œë„
- **ë³€ê²½ í›„**: `comprehensive_analysis()` í˜¸ì¶œ â†’ ì‹¤ì‹œê°„ ë¶„ì„ë§Œ ìˆ˜í–‰

```python
# OLD (ë¼ì¸ 386-396)
results = await self.system.run_market_analysis(strategy=strategy_name, limit=None)

# NEW 
analysis_success = await self.system.analysis_handlers.comprehensive_analysis()
```

#### 2ë‹¨ê³„: ë‰´ìŠ¤ ë¶„ì„ ì‹¤ì œ ì‘ë™ êµ¬í˜„ âœ…
**íŒŒì¼**: `D:/trading_system/data_collectors/kis_collector.py`

**get_news_data() ë©”ì„œë“œ ì™„ì „ ì¬ì‘ì„±** (ë¼ì¸ 725-770):
- KIS APIë¡œ ì‹¤ì œ ë‰´ìŠ¤ ì¡°íšŒ ì‹œë„
- ì‹¤íŒ¨ ì‹œ ì›¹ í¬ë¡¤ë§ìœ¼ë¡œ ì‹¤ì œ ë‰´ìŠ¤ ìˆ˜ì§‘
- ë„¤ì´ë²„ ê¸ˆìœµ, ë‹¤ìŒ ê¸ˆìœµì—ì„œ ë‰´ìŠ¤ í¬ë¡¤ë§

**_crawl_web_news() ë©”ì„œë“œ ì¶”ê°€** (ë¼ì¸ 879-966):
```python
async def _crawl_web_news(self, symbol: str, name: str, days: int = 7) -> List[Dict]:
    # ë„¤ì´ë²„ ê¸ˆìœµ ë‰´ìŠ¤ í¬ë¡¤ë§
    search_url = f"https://finance.naver.com/item/news_news.naver?code={symbol}"
    # ë‹¤ìŒ ì¹´ì¹´ì˜¤ ê¸ˆìœµ ë‰´ìŠ¤ í¬ë¡¤ë§  
    daum_url = f"https://finance.daum.net/quotes/A{symbol}"
```

#### 3ë‹¨ê³„: íŒ¨í„´ ë¶„ì„ ì‹¤ì œ ì‘ë™ êµ¬í˜„ âœ…
**íŒŒì¼ 1**: `D:/trading_system/analyzers/analysis_engine.py` (ë¼ì¸ 134-136)
```python
# NEW: OHLCV ë°ì´í„°ë¥¼ íŒ¨í„´ ë¶„ì„ê¸°ë¡œ ì „ë‹¬
tasks.append(('chart_pattern', asyncio.wait_for(
    self.chart_pattern_analyzer.analyze_with_ohlcv(stock_data, price_data), timeout=10.0
)))
```

**íŒŒì¼ 2**: `D:/trading_system/analyzers/chart_pattern_analyzer.py`
- `analyze_with_ohlcv()` ë©”ì„œë“œ ì¶”ê°€ (ë¼ì¸ 81-114)
- ì‹¤ì œ OHLCV ë°ì´í„°ë¥¼ ë°›ì•„ì„œ íŒ¨í„´ ë¶„ì„ ìˆ˜í–‰

**íŒŒì¼ 3**: `D:/trading_system/utils/pattern_detector.py`
- `_detect_ohlcv_patterns()` ë©”ì„œë“œ ì¶”ê°€ (ë¼ì¸ 306-344)
- ì‹¤ì œ ìº”ë“¤ìŠ¤í‹± íŒ¨í„´ ê°ì§€ êµ¬í˜„:
  - `_detect_hammer_pattern()` (ë¼ì¸ 346-390): ë§ì¹˜í˜• íŒ¨í„´
  - `_detect_doji_pattern()` (ë¼ì¸ 392-426): ë„ì§€ íŒ¨í„´  
  - `_detect_engulfing_pattern()` (ë¼ì¸ 428-468): í¬ìš©í˜• íŒ¨í„´
  - `_detect_three_candle_pattern()` (ë¼ì¸ 470-513): ì‚¼ë´‰ íŒ¨í„´

#### 4ë‹¨ê³„: analysis_handlers ì´ˆê¸°í™” ë¬¸ì œ í•´ê²° âœ…
**íŒŒì¼**: `D:/trading_system/core/trading_system.py`
- `initialize_components()` ë©”ì„œë“œì— `AnalysisHandlers` ì´ˆê¸°í™” ì¶”ê°€
- ë¼ì¸ 372-380ì— analysis_handlers ì´ˆê¸°í™” ì½”ë“œ ì¶”ê°€

```python
# ë¶„ì„ í•¸ë“¤ëŸ¬
try:
    from core.analysis_handlers import AnalysisHandlers
    self.analysis_handlers = AnalysisHandlers(self)
    self.logger.info("âœ… ë¶„ì„ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™” ì™„ë£Œ")
except Exception as e:
    self.logger.warning(f"âš ï¸ ë¶„ì„ í•¸ë“¤ëŸ¬ ì´ˆê¸°í™” ì‹¤íŒ¨: {e}")
    self.analysis_handlers = None
```

#### 5ë‹¨ê³„: get_filtered_stocks() í•˜ë“œì½”ë”© ë¬¸ì œ í•´ê²° âœ…
**íŒŒì¼**: `D:/trading_system/data_collectors/kis_collector.py`
- `get_filtered_stocks()` ë©”ì„œë“œ êµ¬í˜„ (ë¼ì¸ 772-850)
- ì‹¤ì œ KIS API í™œìš©í•œ ì¢…ëª© ì¡°íšŒ:
  1. HTS ì¡°ê±´ê²€ìƒ‰ í™œìš© (momentum ì „ëµ)
  2. PyKis stock ë©”ì„œë“œ í™œìš©
  3. ì½”ìŠ¤í”¼ ì‹œê°€ì´ì•¡ ìƒìœ„ ì¢…ëª© ì¡°íšŒ
  4. DBì—ì„œ ê¸°ì¡´ í•„í„°ë§ëœ ì¢…ëª© ì¡°íšŒ

### ğŸ” í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ë¬¸ì œ

#### PyKis API ì¢…ëª© ì¡°íšŒ ì‹¤íŒ¨ âš ï¸
**ì—ëŸ¬**: `PyKis not available for HTS conditions`
**ì›ì¸**: PyKis ì´ˆê¸°í™” ì‹œ `id` íŒŒë¼ë¯¸í„°ê°€ í•„ìˆ˜ì´ì§€ë§Œ ì„¤ì •ë˜ì§€ ì•ŠìŒ

**í•´ê²° ì‹œë„**:
1. PyKis ì´ˆê¸°í™” ë¡œì§ ê°œì„  - KIS ê³„ì • ì •ë³´ í•„ìš”
2. PyKis 2.1.3ì˜ ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ì„œë“œ í™•ì¸ (`stock` ë©”ì„œë“œ ì¡´ì¬)
3. ì˜ëª»ëœ ë©”ì„œë“œ ì œê±° (`get_market_ohlcv`, `get_market_cap_rank` ë“±ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ)

### ğŸ“‹ ë‚¨ì€ ì‘ì—…

1. **KIS ê³„ì • ì„¤ì • í™•ì¸**: `config.kis_account.KIS_USER_ID` ì„¤ì • í•„ìš”
2. **PyKis API ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²• íŒŒì•…**: ì‹¤ì œ ì‘ë™í•˜ëŠ” ë©”ì„œë“œë“¤ë¡œ ì¢…ëª© ì¡°íšŒ êµ¬í˜„
3. **ì¢…ëª© ì¡°íšŒ ìµœì¢… ê²€ì¦**: ì‹¤ì œ ì¢…ëª© ë°ì´í„°ê°€ ì œëŒ€ë¡œ ì¡°íšŒë˜ëŠ”ì§€ í™•ì¸

### ğŸ›¡ï¸ ê°œë°œ ì›ì¹™ ì¤€ìˆ˜

1. **í•˜ë“œì½”ë”© ê¸ˆì§€**: ëª¨ë“  ì¢…ëª© ì •ë³´ëŠ” ì‹¤ì œ APIë‚˜ DBì—ì„œ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°
2. **ì‹¤ì œ ë°ì´í„° í™œìš©**: ë‰´ìŠ¤, íŒ¨í„´ ë¶„ì„ ëª¨ë‘ ì‹¤ì œ ë°ì´í„°ë¡œ ìˆ˜í–‰
3. **Fallback ê¸ˆì§€**: ë¬¸ì œê°€ ìˆìœ¼ë©´ í•´ê²°í•´ì•¼ í•˜ë©°, fallbackìœ¼ë¡œ ìš°íšŒí•˜ì§€ ì•ŠìŒ
4. **ì‹¤ê±°ë˜ ì¤‘ì‹¬**: ê°€ìƒ ëª¨ë“œë‚˜ ë”ë¯¸ ë°ì´í„° ì‚¬ìš© ê¸ˆì§€

### ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

#### âœ… ì™„ë£Œëœ í…ŒìŠ¤íŠ¸
- ëª¨ë“  í•µì‹¬ ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ
- analysis_handlers ì´ˆê¸°í™” ì„±ê³µ
- comprehensive_analysis() ë©”ì„œë“œ ì¡´ì¬ í™•ì¸
- OHLCV íŒ¨í„´ ê°ì§€ ë©”ì„œë“œë“¤ ì¡´ì¬ í™•ì¸
- ë‰´ìŠ¤ í¬ë¡¤ë§ ë©”ì„œë“œ ì¡´ì¬ í™•ì¸

#### â³ ì§„í–‰ ì¤‘ì¸ í…ŒìŠ¤íŠ¸
- PyKis APIë¥¼ í†µí•œ ì‹¤ì œ ì¢…ëª© ì¡°íšŒ
- KIS ê³„ì • ì„¤ì • ê²€ì¦
- 44ë²ˆ ë©”ë‰´ ì „ì²´ í”Œë¡œìš° ê²€ì¦

### ğŸ”— ê´€ë ¨ íŒŒì¼ë“¤

#### ìˆ˜ì •ëœ íŒŒì¼ë“¤
1. `D:/trading_system/core/menu_handlers.py` - 44ë²ˆ ë©”ë‰´ ë¡œì§ ìˆ˜ì •
2. `D:/trading_system/core/trading_system.py` - analysis_handlers ì´ˆê¸°í™” ì¶”ê°€
3. `D:/trading_system/data_collectors/kis_collector.py` - ë‰´ìŠ¤ ìˆ˜ì§‘, ì¢…ëª© ì¡°íšŒ êµ¬í˜„
4. `D:/trading_system/analyzers/analysis_engine.py` - OHLCV ë°ì´í„° ì „ë‹¬ ë¡œì§
5. `D:/trading_system/analyzers/chart_pattern_analyzer.py` - OHLCV ë¶„ì„ ë©”ì„œë“œ ì¶”ê°€
6. `D:/trading_system/utils/pattern_detector.py` - ì‹¤ì œ ìº”ë“¤ íŒ¨í„´ ê°ì§€ êµ¬í˜„

#### í•µì‹¬ í´ë˜ìŠ¤/ë©”ì„œë“œ
- `AnalysisHandlers.comprehensive_analysis()` - 44ë²ˆ ë©”ë‰´ ì§„ì…ì 
- `KISCollector.get_filtered_stocks()` - í•˜ë“œì½”ë”© ì—†ëŠ” ì¢…ëª© ì¡°íšŒ
- `KISCollector.get_news_data()` - ì‹¤ì œ ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘
- `ChartPatternAnalyzer.analyze_with_ohlcv()` - ì‹¤ì œ íŒ¨í„´ ë¶„ì„
- `PatternDetector._detect_ohlcv_patterns()` - ìº”ë“¤ íŒ¨í„´ ê°ì§€

### ğŸ“ ë‹¤ìŒ ì„¸ì…˜ ì‘ì—… ê°€ì´ë“œ

1. **config.py í™•ì¸**: `kis_account.KIS_USER_ID` ì„¤ì • ì—¬ë¶€ í™•ì¸
2. **PyKis ë¬¸ì„œ ì°¸ì¡°**: ì˜¬ë°”ë¥¸ PyKis API ì‚¬ìš©ë²• í™•ì¸
3. **44ë²ˆ ë©”ë‰´ ì¬í…ŒìŠ¤íŠ¸**: ëª¨ë“  ìˆ˜ì •ì‚¬í•­ ì ìš© í›„ ì „ì²´ í”Œë¡œìš° ê²€ì¦
4. **ë¡œê·¸ ë¶„ì„**: ê° ë‹¨ê³„ë³„ ì„±ê³µ/ì‹¤íŒ¨ ë¡œê·¸ í™•ì¸í•˜ì—¬ ì¶”ê°€ ë¬¸ì œ í•´ê²°

### ğŸ¯ ìµœì¢… ëª©í‘œ

**44ë²ˆ ë©”ë‰´ì—ì„œ ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ì˜ ì™„ì „í•œ ì¢…í•© ë¶„ì„ ìˆ˜í–‰**:
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì—†ìŒ
- âœ… ì‹¤ì œ ë‰´ìŠ¤ ë°ì´í„° ë¶„ì„  
- âœ… ì‹¤ì œ OHLCV íŒ¨í„´ ë¶„ì„
- â³ ì‹¤ì œ ì¢…ëª© ë°ì´í„° ì¡°íšŒ
- â³ í•˜ë“œì½”ë”© ì™„ì „ ì œê±°

---

*Last Updated: 2025-08-08*
*Next Review: 2025-08-09*